import{X as S,A as I,I as T,a as E,b as O,c as U,E as w,d as D,M as P}from"./MainLayout-DrX3iqhy.js";import{A as g,_ as y,a as F}from"./AppTypography-8rqeKAAl.js";import{g as $,d as h,o as e,c,b as f,a as i,w as m,e as x,t as B,r as H,h as v,i as A,f as _,j as X,v as j,m as L,k as q,l as k,n as z,F as N,p as b,q as G}from"./index-B-c-jZSJ.js";const M="/notes",C={getAll(){return $.get(M)},createOne(u){return $.post(M,u)},deleteOneById(u){return $.delete(`${M}/${u}`)}},J={class:"note"},K={class:"note__header"},Q={class:"note__content"},R={key:0,class:"note__footer"},W=h({__name:"NoteCard",props:{title:{},content:{},hideActions:{type:Boolean,default:!1}},emits:["click:delete"],setup(u,{emit:o}){const l=o,s=()=>{l("click:delete")};return(t,n)=>(e(),c("article",J,[f("header",K,[i(g,{is:"h4",variant:"h4"},{default:m(()=>[x(B(t.title),1)]),_:1})]),f("main",Q,[i(g,{is:"p"},{default:m(()=>[x(B(t.content),1)]),_:1})]),t.hideActions?v("",!0):(e(),c("footer",R,[H(t.$slots,"actions",{},()=>[i(I,{onClick:s},{default:m(()=>[i(S),i(g,null,{default:m(()=>n[0]||(n[0]=[x("Удалить")])),_:1})]),_:1})],!0)]))]))}}),Y=y(W,[["__scopeId","data-v-920035c0"]]),Z={class:"wrapper"},ee={class:"wrapper__input input"},te={key:1,class:"wrapper__footer footer"},ae=h({__name:"AppTextarea",props:{modelValue:{},label:{default:""},errors:{default:()=>[]},counterValue:{default:null},counterMaxValue:{default:null}},emits:["update:modelValue"],setup(u,{emit:o}){const l=o,s=A({get(){return u.modelValue},set(p){l("update:modelValue",p)}}),t=A(()=>u.errors[0]),n=A(()=>u.counterValue!==null);return(p,a)=>(e(),c("div",Z,[p.label?(e(),_(T,{key:0,class:"wrapper__label",text:p.label},null,8,["text"])):v("",!0),f("label",ee,[X(f("textarea",L({"onUpdate:modelValue":a[0]||(a[0]=r=>s.value=r),class:"native-input",rows:4},p.$attrs),null,16),[[j,s.value]])]),t.value||n.value?(e(),c("div",te,[t.value?(e(),_(E,{key:0,class:"footer__error",text:t.value},null,8,["text"])):v("",!0),n.value?(e(),_(O,{key:1,class:"footer__counter",value:p.counterValue,"max-value":p.counterMaxValue},null,8,["value","max-value"])):v("",!0)])):v("",!0)]))}}),oe=y(ae,[["__scopeId","data-v-2b7f4032"]]),se={key:0,class:"errors"},le=h({__name:"AddNoteModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","add:note"],setup(u,{emit:o}){const l=o,s=A({get(){return u.modelValue},set(a){l("update:modelValue",a)}}),t=q({title:"",content:""}),n=k(""),p=async()=>{try{const a=await C.createOne(t);l("add:note",a.data),s.value=!1}catch(a){n.value=a.response.data.message}};return(a,r)=>(e(),_(D,{modelValue:s.value,"onUpdate:modelValue":r[2]||(r[2]=d=>s.value=d),title:"Добавление заметки"},{default:m(()=>[f("form",{class:"form",onSubmit:z(p,["prevent"])},[i(U,{modelValue:t.title,"onUpdate:modelValue":r[0]||(r[0]=d=>t.title=d),placeholder:"Введите название","counter-value":t.title.length,"counter-max-value":100},null,8,["modelValue","counter-value"]),i(oe,{modelValue:t.content,"onUpdate:modelValue":r[1]||(r[1]=d=>t.content=d),placeholder:"Введите текст","counter-value":t.content.length,"counter-max-value":500},null,8,["modelValue","counter-value"]),i(I,{class:"form__action",type:"submit"},{default:m(()=>[i(g,null,{default:m(()=>r[3]||(r[3]=[x("Добавить")])),_:1})]),_:1})],32),n.value?(e(),c("div",se,[Array.isArray(n.value)?(e(!0),c(N,{key:0},b(n.value,(d,V)=>(e(),_(w,{key:V,text:d},null,8,["text"]))),128)):(e(),_(w,{key:1,text:n.value},null,8,["text"]))])):v("",!0)]),_:1},8,["modelValue"]))}}),ne=y(le,[["__scopeId","data-v-6947d7f0"]]),re={},ue={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function de(u,o){return e(),c("svg",ue,o[0]||(o[0]=[f("path",{d:"M1 9H17M9 1L9 17",stroke:"white","stroke-width":"2","stroke-linecap":"round"},null,-1)]))}const ce=y(re,[["render",de]]),ie=h({__name:"AddNoteButton",setup(u){const o=k(!1),l=()=>{o.value=!0};return(s,t)=>(e(),_(I,{class:"button",icon:"",onClick:l},{default:m(()=>[i(ce),o.value?(e(),_(ne,L({key:0,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=n=>o.value=n)},s.$attrs),null,16,["modelValue"])):v("",!0)]),_:1}))}}),_e=y(ie,[["__scopeId","data-v-2231d890"]]),pe={class:"notes"},me={key:0,class:"notes__text"},ve={key:1,class:"notes__list"},fe={key:2,class:"notes__text errors"},ye=h({__name:"NotesList",setup(u){const o=k(!1),l=k(""),s=k([]);G(()=>{t()});const t=async()=>{try{o.value=!0;const a=await C.getAll();s.value=a.data}catch(a){l.value=a.response.data.message}finally{o.value=!1}},n=async a=>{try{await C.deleteOneById(a),s.value=s.value.filter(({id:r})=>r!==a)}catch(r){l.value=r.response.data.message}},p=a=>{s.value.push(a)};return(a,r)=>(e(),c("section",pe,[i(F,{class:"notes__inner"},{default:m(()=>[o.value?(e(),c("div",me,"Загрузка...")):s.value.length?(e(),c("div",ve,[s.value.length?(e(!0),c(N,{key:0},b(s.value,d=>(e(),_(Y,{key:d.id,title:d.title,content:d.content,"onClick:delete":V=>n(d.id)},null,8,["title","content","onClick:delete"]))),128)):v("",!0)])):v("",!0),i(_e,{class:"notes__add-button","onAdd:note":p}),l.value?(e(),c("div",fe,[Array.isArray(l.value)?(e(!0),c(N,{key:0},b(l.value,(d,V)=>(e(),_(w,{key:V,text:d},null,8,["text"]))),128)):(e(),_(w,{key:1,text:l.value},null,8,["text"]))])):v("",!0)]),_:1})]))}}),he=y(ye,[["__scopeId","data-v-2141fafd"]]),xe=h({__name:"NotesPage",setup(u){return(o,l)=>(e(),_(P,null,{default:m(()=>[i(he)]),_:1}))}});export{xe as default};
